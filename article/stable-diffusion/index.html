<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Stable Diffusion 简易安装教程 &nbsp;|&nbsp; 视点</title>
    
    <meta name="keywords" content="AI, Stable, Diffusion, SD, Windows, macOS, 浏览器, 视由, 视界事由, eyecus, 博客, blog">
    
    <meta name="description" property="og:description" content="Stable Diffusion 前段时间大火的 AI 图像生成工具之一，Stable Diffusion 基于Latent Diffusion Models，专门用于文图生成任务。">
    
    
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.jpg">

    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/highlight.css"/>
    
    <script src="https://cdn.bootcdn.net/ajax/libs/pace/1.0.2/pace.js"></script>
  </head>

  <body>


    <div class="header-line"></div>
    <div class="mobile-header bg-w">
      <a class="meun-button-expand" one-link-mark="yes" href="javascript:;"></a>
      <a class="site-logo" href="/"><img src="/img/msk-07.svg"></a>
    </div>
    <header class="header">
    <div class="container w-1150">
      <nav class="nav">
      <a class="site-logo" href="/"><img src="/img/msk-07.svg"></a>
      <ul class="menu">
        <li class="menu-button active"><a id="NavHome" href="/">首页</a></li><li class="menu-button"><a id="NavWarehouse" href="/warehouse">仓库</a></li><li class="menu-button"><a id="NavWebGO" href="/go">导航</a></li>
      </ul>

         
      <li id="fastSearch" >
        <input id="searchInput" placeholder="搜索…" tabindex="0" >
        <ul id="searchResults"></ul>
      </li>
     
      </nav>
    </div>
    </header>

<div class="mobile-sidebar">
  <div class="mobile-sidebar-inner">
  <div class="mobile-nav">
    <a class="mobile-nav-button" href="/">首页</a>
  <a class="mobile-nav-button" href="/warehouse">仓库</a>
  <a class="mobile-nav-button" href="/go">导航</a>
  <a class="mobile-nav-button" href="/about">关于</a>
  </div>

  <div class="mobile-nav-title">大 纲</div> 
    <nav id="TableOfContents">
  <ul>
    <li><a href="#第1步-安装-python-及-git">第1步 安装 Python 及 Git</a></li>
    <li><a href="#第2步-安装-cuda-驱动n卡用户">第2步 安装 CUDA 驱动（N卡用户）</a></li>
    <li><a href="#第3步-部署-webui">第3步 部署 WebUI</a></li>
    <li><a href="#第4步-安装依赖程序">第4步 安装依赖程序</a>
      <ul>
        <li><a href="#windows">Windows</a></li>
        <li><a href="#macos">macOS</a></li>
      </ul>
    </li>
    <li><a href="#第5步-下载模型">第5步 下载模型</a></li>
    <li><a href="#第6步-webui-基本操作">第6步 WebUI 基本操作</a>
      <ul>
        <li><a href="#切换中文用户界面">切换中文用户界面</a></li>
        <li><a href="#更新-webui">更新 WebUI</a></li>
        <li><a href="#安装插件">安装插件</a></li>
      </ul>
    </li>
    <li><a href="#第7步-出图流程">第7步 出图流程</a>
      <ul>
        <li><a href="#基本操作流程">基本操作流程</a></li>
        <li><a href="#各参数含义">各参数含义</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
<style type="text/css">
	#NavWarehouse {color: rgba(0,0,0,.7);font-weight: bold;}
</style>
<div class="container w-1150">
	<div class="flex">
		<div class="main">
			<div class="post-meta">

				<div class="post-title">Stable Diffusion 简易安装教程</div>
				<div class="post-keywords">
					<div class="post-terms">
						
						
						<a class="keywords-btn" href="https://visdot.com/search/stable-diffusion">Stable Diffusion</a>
						
						<a class="keywords-btn" href="https://visdot.com/search/windows">Windows</a>
						
						<a class="keywords-btn" href="https://visdot.com/search/tips">Tips</a>
						
						
					</div>
				</div>


				
				<div class="post-date">Published on 20230725, have 2818 Words.
				</div>
				
			</div>
			<main class="markdown academic w-630">
				<p><code>Stable Diffusion</code> 前段时间大火的 AI 图像生成工具之一，为开源免费的工具，可在用户本地部署运行，要想快速出图，需要配备 NVIDIA 显卡，且具备一定的显卡性能及充裕的显存。</p>
<blockquote>
<p>Stable Diffusion 是 2022 年发布的深度学习文本到图像生成模型。它主要用于根据文本的描述产生详细图像，是一种潜在扩散模型，由慕尼黑大学的 CompVis 研究团体开发的各种生成性人工神经网络之一。它是由初创公司StabilityAI、CompVis 与 Runway 合作开发，并得到 EleutherAI 和 LAION 的支持。截至2022年10月，StabilityAI 筹集了1.01亿美元的资金。Stable Diffusion 的源代码和模型权重已分别公开发布在 GitHub和Hugging Face，可以在大多数配备有适度GPU的电脑硬件上运行。而以前的专有文生图模型（如Midjourney）只能通过云端运算服务访问。</p>
</blockquote>
<p><strong>相关站点</strong>：
<a href="https://www.python.org/downloads/" target="_blank">Python 官网</a>
<a href="https://git-scm.com/download" target="_blank">Git 官网</a>
<a href="https://developer.nvidia.com/cuda-toolkit" target="_blank">NVIDIA 官网</a>
<a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" target="_blank">WebUI 仓库</a>
<a href="https://civitai.com/" target="_blank">Civitai 社区</a></p>
<h2 id="第1步-安装-python-及-git">第1步 安装 Python 及 Git</h2>
<p>前往官网下载并安装 Python，为保证兼容性，推荐安装版本为 <code>Python 3.10.6</code> ，安装完成后在「命令提示符」或者「终端」中输入下列命令验证是否安装成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Python -V
</span></span></code></pre></div><p>前往官网下载并安装最新版本 Git 工具，安装完成后在「命令提示符」或者「终端」中输入下列命令验证是否安装成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git --version
</span></span></code></pre></div><h2 id="第2步-安装-cuda-驱动n卡用户">第2步 安装 CUDA 驱动（N卡用户）</h2>
<p>如果电脑安装的是 NVIDIA 显卡，除更新的 Geforce 驱动外，还需额外安装 CUDA 驱动，在「命令提示符」中输入下列命令获取硬件所支持的最高 <code>CUDA Version</code> 版本号。</p>
<pre tabindex="0"><code>nvidia-smi
</code></pre><p>获取版本号后，前往 NVIDIA 官网下载并安装显卡所支持的最高 CUDA 版本对应 <code>CUDA Toolkit</code> 的驱动，近几年的新显卡通常能支持最新的<code>CUDA Toolkit 12.3</code>。</p>
<blockquote>
<p>受国内网络影响，官网下载 CUDA Toolkit 安装包时推荐选在 local（本地）版本。</p>
</blockquote>
<h2 id="第3步-部署-webui">第3步 部署 WebUI</h2>
<p>在「命令提示符」或者「终端」中定位到需要部署的路径，然后输入下列命令克隆 WebUI 仓库。</p>
<pre tabindex="0"><code>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
</code></pre><blockquote>
<p>Stable Diffusion 部署路径需要预留足够的硬盘空间，否则将影响大型模型的部署，推荐为其预留 100GB 左右的硬盘空间。</p>
</blockquote>
<p>如因网络原因无法通过「命令提示符」部署，也可浏览器进入<a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">WebUI仓库</a>页面手动下载，下载后解压到需要部署的路径即可。</p>
<h2 id="第4步-安装依赖程序">第4步 安装依赖程序</h2>
<h3 id="windows">Windows</h3>
<p>仓库部署完成后，Windows 用户进入文件夹左键双击运行 <code>webui-user.bat</code> 文件。</p>
<h3 id="macos">macOS</h3>
<p>macOS 用户则是打开「终端」，定位到部署文件夹，输入如下命令运行 WebUI。</p>
<pre tabindex="0"><code>./webui.sh
</code></pre><p>运行后 WebUI 后会自动进行依赖程序的安装，包括 gfpgan、clip、requirements for Web UI、torch 等，其中部分程序大小达到 GB 量级，加上部分用户的网络限制，安装过程需要耐心等候。若某一步骤等待很久，窗口代码任无变化，可关闭窗口，重新打开 webui，多试几次。</p>
<p>当窗口出现 <code>Running on 1ocal URL:http://127.0.0.1:7868</code>，说明依赖程序安装已安装完成，此时在浏览器输入如下地址即可进入 WebUI 的用户页面。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">http://127.0.0.1:7860
</span></span></code></pre></div><h2 id="第5步-下载模型">第5步 下载模型</h2>
<p>Stable Diffusion 默认模型出图效果一般，为了丰富出图效果，需要选择更强大，更有针对性的模型，推荐访问一些AI模型网站，下载 <code>model</code> 和 <code>lora</code> 部署到本地。下列为一些常见的模型网站。</p>
<table>
<thead>
<tr>
<th style="text-align:left">网站名称</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Civitai 社区</td>
<td style="text-align:left"><a href="https://civitai.com/" target="_blank">civitai.com</a></td>
</tr>
<tr>
<td style="text-align:left">哩布哩布 AI</td>
<td style="text-align:left"><a href="https://www.liblib.ai/" target="_blank">liblib.ai</a></td>
</tr>
<tr>
<td style="text-align:left">Hugging Face（抱脸网）</td>
<td style="text-align:left"><a href="https://huggingface.co/models" target="_blank">huggingface.co/models</a></td>
</tr>
</tbody>
</table>
<ul>
<li><code>model</code>，将后缀名为<code>.safetensors</code>的文件移动至如下路径。</li>
</ul>
<pre tabindex="0"><code>.../stable-diffusion-webui/models/Stable-diffusion
</code></pre><ul>
<li><code>lora</code>，将后缀名为<code>.safetensors</code>的文件移动至如下路径。</li>
</ul>
<pre tabindex="0"><code>.../stable-diffusion-webui/extensions/sd-webui-additional-networks/models/lora
</code></pre><h2 id="第6步-webui-基本操作">第6步 WebUI 基本操作</h2>
<h3 id="切换中文用户界面">切换中文用户界面</h3>
<p>点击 「extensions」选项卡，然后点击 「Available」标签，取消勾选 「Hide extensions with tags」下方全部选项，然后点击 「Load from」按钮，在下方搜索框（Search）中输入<code>CN</code>，在下方列表中选择<code>zh_CN localization</code>插件，点击右侧「Install」按钮。安装完成后点击页面右下角「Reload UI」选项重启 WebUI。</p>
<p>重启后点击 「Settings」选项卡，在左侧边栏中点击 「User Interface」选项，在右侧「Localization」下方选项卡中选择<code>zh_CN</code>选项，然后再次点击页面右下角「Reload UI」选项重启 WebUI，重启后页面即切换成中文。</p>
<blockquote>
<p>需切换回英文，在上述步骤中选择<code>None</code>选项后重启 WebUI 即可。</p>
</blockquote>
<h3 id="更新-webui">更新 WebUI</h3>
<p>如果你是通过 Git 工具部署的 WebUI，可定位到 WebUI 部署路径，使用 <code>git pull</code> 命令自动更新。</p>
<p>如果未安装 Git 或者是使用了非 Git 的方式部署的 WebUI，则可在浏览器进入<a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">WebUI仓库</a>页面手动下载最新版本，然后解压并覆盖到 WebUI 部署的路径。</p>
<blockquote>
<p>注意在覆盖安装前，做好已下载的插件及模型的备份工作，避免丢失。</p>
</blockquote>
<h3 id="安装插件">安装插件</h3>
<table>
<thead>
<tr>
<th style="text-align:left">插件功能</th>
<th style="text-align:left">插件名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">控制人物动作</td>
<td style="text-align:left">sd-webui-openpose-editor-main</td>
</tr>
<tr>
<td style="text-align:left">无损放大分辨率</td>
<td style="text-align:left">4x-UltraSharp</td>
</tr>
<tr>
<td style="text-align:left">无缝放大图片</td>
<td style="text-align:left">TiledDiffusion with Tiled VAE</td>
</tr>
<tr>
<td style="text-align:left">提示词助手</td>
<td style="text-align:left">lora-prompt-tool</td>
</tr>
<tr>
<td style="text-align:left">人物手部修复</td>
<td style="text-align:left">Depth Library</td>
</tr>
<tr>
<td style="text-align:left">人物脸部修复</td>
<td style="text-align:left">After Detailer</td>
</tr>
<tr>
<td style="text-align:left">手动控制构图</td>
<td style="text-align:left">Latent Couple</td>
</tr>
<tr>
<td style="text-align:left">锁定生成图片的比例</td>
<td style="text-align:left">Aspect Ratio</td>
</tr>
<tr>
<td style="text-align:left">动画插件</td>
<td style="text-align:left">Deforum</td>
</tr>
<tr>
<td style="text-align:left">动画插件</td>
<td style="text-align:left">text2video</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>在线库安装模式</strong>：点击 「extensions」选项卡，然后点击 「Available」标签，取消勾选 「Hide extensions with tags」下方全部选项，然后点击 「Load from」按钮，在下方搜索框（Search）中输入你想安装的插件名称，在下方列表中选择你需要安装的插件，点击其右侧「Install」按钮。安装完成后点击页面右下角「Reload UI」选项重启 WebUI。</p>
</li>
<li>
<p><strong>仓库地址安装模式</strong>：点击 「extensions」选项卡，然后点击 「Install from URL」标签，在地址栏中输入插件的仓库地址，点击「Install」按钮。安装完成后点击页面右下角「Reload UI」选项重启 WebUI。</p>
</li>
</ul>
<h2 id="第7步-出图流程">第7步 出图流程</h2>
<h3 id="基本操作流程">基本操作流程</h3>
<ul>
<li><strong>文字生成图片</strong>：选择模型 &mdash;&gt; 填写提示词 &mdash;&gt; 设置参数 &mdash;&gt; 点击生成</li>
<li><strong>图片生成图片</strong>：选择模型 &mdash;&gt; 指定图片 &mdash;&gt; 设置参数 &mdash;&gt; 点击生成</li>
</ul>
<h3 id="各参数含义">各参数含义</h3>
<ul>
<li>
<p><strong>提示词（Prompt）</strong>：用于指定想要生成的图像的关键词，例如：人、城市、蓝天等，用逗号隔开作为输入，关键词输入的先后顺序越靠前的其作用于图像的权重越大。</p>
</li>
<li>
<p><strong>反向提示词（Negative prompt）</strong>：用于指出你不想出现事物或情形的关键词，例如：缺手指、畸形等，用逗号隔开作为输入，一般用于对生成图片的细节进行把控。</p>
</li>
<li>
<p><strong>采样迭代步数（Sampling method）</strong>：控制图像生成的迭代次数，每一次采样步数都是在上一次的迭代步骤基础上绘制生成一个新的图片，数值越高则图像精细度越高，建议在 <code>18～30</code> 之间。采样迭代步数过低会导致画面计算不完整，高的采样步数则是在图片细节处进行优化，需要与图像生成速度之间做到平衡。</p>
</li>
<li>
<p><strong>采样方法（Sampling steps）</strong>：指定生成图像的采样算法，通常根据模型作者推荐的方式选择，常用到的是 <code>Euler a</code>，<code>DPM++2S a Karras</code> 和 <code>DDI</code>。</p>
</li>
<li>
<p><strong>宽度、高度（Width、Height）</strong>：指定生成图像的像素尺寸，尺寸过大会增加图像出错的概率，同时尺寸越大对电脑的性能尤其是显存要求越高，也会大大增加图像生成的时间，建议控制在 <code>1024</code> 以内。</p>
</li>
<li>
<p><strong>提示词相关性（CFG Scale）</strong>：控制图像和提示词描述的相关程度，数值越高生成的图像与提示词关联性越低，也越随机。对于人物类的提示词建议控制在 <code>7～12</code> 之间，对于建筑等物品类的提示词建议控制在 <code>3～7</code> 之间。</p>
</li>
<li>
<p><strong>随机种子（Seed）</strong>：随机种子是一个可以锁定生成图像的初始状态的值，相同的参数可用于复现生成结果。默认值 <code>-1</code> 表示随机生成状态。</p>
</li>
</ul>

			</main>
			<div class="pre-next vd-b-top">
		
	<a href="https://visdot.com/article/autoit/"><div class="pre-btn"><svg t="1605930649708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2619" width="22" height="22"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#515151" p-id="2620"></path></svg>通过 AutoIt 实现电脑的自动化操作</div></a>
	
	
</div>
		</div>
		<div class="sidebar">
			<div class="py-20" align="center">
	<a href="/go"><img class="h-125" src="/img/vis.webgo.png"></a>
</div>
			<div class="py-20" align="center">
  <a href="/warehouse"><img class="h-50" src="/img/vis.warehouse.svg"></a>
</div>

			<div class="sidebar-toc vd-element vd-b-bottom bg-w">
  <div class="vd-l-a">
    <div class="vd-l-title">大纲</div>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#第1步-安装-python-及-git">第1步 安装 Python 及 Git</a></li>
    <li><a href="#第2步-安装-cuda-驱动n卡用户">第2步 安装 CUDA 驱动（N卡用户）</a></li>
    <li><a href="#第3步-部署-webui">第3步 部署 WebUI</a></li>
    <li><a href="#第4步-安装依赖程序">第4步 安装依赖程序</a>
      <ul>
        <li><a href="#windows">Windows</a></li>
        <li><a href="#macos">macOS</a></li>
      </ul>
    </li>
    <li><a href="#第5步-下载模型">第5步 下载模型</a></li>
    <li><a href="#第6步-webui-基本操作">第6步 WebUI 基本操作</a>
      <ul>
        <li><a href="#切换中文用户界面">切换中文用户界面</a></li>
        <li><a href="#更新-webui">更新 WebUI</a></li>
        <li><a href="#安装插件">安装插件</a></li>
      </ul>
    </li>
    <li><a href="#第7步-出图流程">第7步 出图流程</a>
      <ul>
        <li><a href="#基本操作流程">基本操作流程</a></li>
        <li><a href="#各参数含义">各参数含义</a></li>
      </ul>
    </li>
  </ul>
</nav>
	</div>
   <a class="vd-a" href="javascript:scroll(0,0)">返回页首</a>
</div>
		</div>

	</div>
</div>
  <div class="footer">
  	Copyright &copy 2019-2023 <a target="_blank" href="https://github.com/leejiawang">世佳</a> ｜ <a href="/about">关于视点</a> ｜ </span><a href="javascript:scroll(0,0)">返回页首</a><svg t="1604653824882" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3895" width="20" height="20"><path d="M794.453333 350.72l-213.333333-170.666667a42.666667 42.666667 0 0 0-52.906667 0l-213.333333 170.666667a42.666667 42.666667 0 0 0 52.906667 66.56L512 302.08V682.666667a42.666667 42.666667 0 0 1-42.666667 42.666666H256a42.666667 42.666667 0 0 0 0 85.333334h213.333333a128 128 0 0 0 128-128V302.08l144.213334 115.2A42.666667 42.666667 0 0 0 768 426.666667a42.666667 42.666667 0 0 0 33.28-16.213334 42.666667 42.666667 0 0 0-6.826667-59.733333z" p-id="3896" fill="#8a8a8a"></path></svg>
</div>

  </body>

  <script src="/js/common.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.3.2/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="https://cdn.bootcdn.net/ajax/libs/fuse.js/6.4.3/fuse.min.js"></script>
  <script src="/js/fastsearch.js"></script>
</html>
