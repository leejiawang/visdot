<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>视点 › 笔记「Shell」</title>
    
    <meta name="keywords" content="shell, 脚本, 语言, 视点, 视由, 视界事由, eyecus, 博客, blog">
    
    <meta name="description" property="og:description" content="本页主要记录我学习 Shell 过程中觉得实用的笔记。">
    
    
    <link rel="icon" href="/img/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/highlight.css"/>
    
    <script src="https://cdn.bootcdn.net/ajax/libs/pace/1.0.2/pace.js"></script>
  </head>

  <body>
    <div class="header-line"></div>
    <div class="mobile-header bg-w">
      <a class="meun-button-expand" one-link-mark="yes"></a>
      <a class="site-logo" href="/"><img src="/img/msk-07.png"></a>
    </div>
    <header class="header vd-glass-w">
    <div class="container w-1150">
      <nav class="nav">
      <a class="site-logo" href="/"><img src="/img/msk-07.png"></a>
      <ul class="menu">
        <li class="menu-button active"><a id="NavHome" href="/">首页</a></li><li class="menu-button"><a id="NavWarehouse" href="/warehouse">仓库</a></li><li class="menu-button"><a id="NavProjects" href="/projects">项目</a></li><li class="menu-button"><a id="NavWebGO" href="/go">导航</a></li>
      </ul>

      <ul class="nav">      
      <li id="fastSearch" >
        <input id="searchInput" placeholder="搜索…" tabindex="0" >
        <ul id="searchResults"></ul>
      </li>
       <li class="nav-sub-button"><a href="/index.xml">订阅</a></li>
      </ul>
      
      </nav>
    </div>
    </header>
<div class="mobile-sidebar">
  <div class="mobile-sidebar-inner">
  <div class="mobile-nav">
  <a class="mobile-nav-button" href="/warehouse">仓库</a>
  <a class="mobile-nav-button" href="/projects">项目</a>
  <a class="mobile-nav-button" href="/go">导航</a>
  <a class="mobile-nav-button" href="/about">关于</a>
  </div>

  <div class="mobile-nav-title">大 纲</div> 
    <nav id="TableOfContents">
  <ul>
    <li><a href="#基本语法">基本语法</a>
      <ul>
        <li><a href="#特殊字符用法">特殊字符用法</a></li>
      </ul>
    </li>
    <li><a href="#运算">运算</a>
      <ul>
        <li><a href="#基本运算符">基本运算符</a></li>
        <li><a href="#关系运算符">关系运算符</a></li>
        <li><a href="#布尔运算符">布尔运算符</a></li>
        <li><a href="#逻辑运算符">逻辑运算符</a></li>
        <li><a href="#字符串运算符">字符串运算符</a></li>
        <li><a href="#执行脚本">执行脚本</a></li>
      </ul>
    </li>
    <li><a href="#变量">变量</a>
      <ul>
        <li><a href="#变量命名规则">变量命名规则</a></li>
      </ul>
    </li>
    <li><a href="#基本用法">基本用法</a>
      <ul>
        <li><a href="#只读变量">只读变量</a></li>
        <li><a href="#删除变量">删除变量</a></li>
      </ul>
    </li>
    <li><a href="#shell-字符串">Shell 字符串</a>
      <ul>
        <li><a href="#获取字符串长度">获取字符串长度</a></li>
        <li><a href="#提取子字符串">提取子字符串</a></li>
        <li><a href="#查找子字符串">查找子字符串</a></li>
      </ul>
    </li>
    <li><a href="#shell-数组">Shell 数组</a>
      <ul>
        <li><a href="#读取数组">读取数组</a></li>
      </ul>
    </li>
    <li><a href="#参考资料">参考资料</a></li>
  </ul>
</nav>
  </div>
</div>
<style type="text/css">
	#NavWarehouse {color: rgba(0,0,0,.7);font-weight: bold;}
</style>
<div class="container">
	<div class="flex w-1150">
		<div class="left-sidebar">
			<div class="vd-l-a vd-fixed doc-sidebar vd-maxh bg-w">
				<div style="
				font-size: 19px;
				line-height: 1.3em;
					color: #2095FA;
					font-weight: bold;
					padding-left: 10px;
					border-left: 5px solid #2095FA;
				"> 笔记「Shell」</div>
				<div class="vd-l-title pt-25">大纲</div>
				<div class="">
					<nav id="TableOfContents">
  <ul>
    <li><a href="#基本语法">基本语法</a>
      <ul>
        <li><a href="#特殊字符用法">特殊字符用法</a></li>
      </ul>
    </li>
    <li><a href="#运算">运算</a>
      <ul>
        <li><a href="#基本运算符">基本运算符</a></li>
        <li><a href="#关系运算符">关系运算符</a></li>
        <li><a href="#布尔运算符">布尔运算符</a></li>
        <li><a href="#逻辑运算符">逻辑运算符</a></li>
        <li><a href="#字符串运算符">字符串运算符</a></li>
        <li><a href="#执行脚本">执行脚本</a></li>
      </ul>
    </li>
    <li><a href="#变量">变量</a>
      <ul>
        <li><a href="#变量命名规则">变量命名规则</a></li>
      </ul>
    </li>
    <li><a href="#基本用法">基本用法</a>
      <ul>
        <li><a href="#只读变量">只读变量</a></li>
        <li><a href="#删除变量">删除变量</a></li>
      </ul>
    </li>
    <li><a href="#shell-字符串">Shell 字符串</a>
      <ul>
        <li><a href="#获取字符串长度">获取字符串长度</a></li>
        <li><a href="#提取子字符串">提取子字符串</a></li>
        <li><a href="#查找子字符串">查找子字符串</a></li>
      </ul>
    </li>
    <li><a href="#shell-数组">Shell 数组</a>
      <ul>
        <li><a href="#读取数组">读取数组</a></li>
      </ul>
    </li>
    <li><a href="#参考资料">参考资料</a></li>
  </ul>
</nav>
				</div>
			</div>

		</div>
		<div class="main">
		<div class="markdown academic w-730">				
			<div class="docs-meta">
				<span class="post-date">Built in 20201213</span>
			</div>
			<h2 id="基本语法">基本语法</h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;Hello World !&#34;</span>

</code></pre></div><h3 id="特殊字符用法">特殊字符用法</h3>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>$#</code></td>
<td style="text-align:left">传递到脚本的参数个数</td>
</tr>
<tr>
<td style="text-align:center"><code>$*</code></td>
<td style="text-align:left">以一个单字符串显示所有向脚本传递的参数。</td>
</tr>
<tr>
<td style="text-align:center"><code>$$</code></td>
<td style="text-align:left">脚本运行的当前进程ID号</td>
</tr>
<tr>
<td style="text-align:center"><code>$!</code></td>
<td style="text-align:left">后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td style="text-align:center"><code>$@</code></td>
<td style="text-align:left">与$*相同，但是使用时加引号，并在引号中返回每个参数。</td>
</tr>
<tr>
<td style="text-align:center"><code>$-</code></td>
<td style="text-align:left">显示Shell使用的当前选项，与set命令功能相同。</td>
</tr>
<tr>
<td style="text-align:center"><code>$?</code></td>
<td style="text-align:left">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h2 id="运算">运算</h2>
<h3 id="基本运算符">基本运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>+</code></td>
<td style="text-align:left">加法</td>
<td style="text-align:left"><code>expr $a + $b</code> 结果为 30。</td>
</tr>
<tr>
<td style="text-align:center"><code>-</code></td>
<td style="text-align:left">减法</td>
<td style="text-align:left"><code>expr $a - $b</code> 结果为 -10。</td>
</tr>
<tr>
<td style="text-align:center"><code>*</code></td>
<td style="text-align:left">乘法</td>
<td style="text-align:left"><code>expr $a \* $b</code> 结果为  200。</td>
</tr>
<tr>
<td style="text-align:center"><code>/</code></td>
<td style="text-align:left">除法</td>
<td style="text-align:left"><code>expr $b / $a</code> 结果为 2。</td>
</tr>
<tr>
<td style="text-align:center"><code>%</code></td>
<td style="text-align:left">取余</td>
<td style="text-align:left"><code>expr $b % $a</code> 结果为 0。</td>
</tr>
<tr>
<td style="text-align:center"><code>=</code></td>
<td style="text-align:left">赋值</td>
<td style="text-align:left"><code>a=$b</code> 将把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td style="text-align:center"><code>==</code></td>
<td style="text-align:left">比较两个数字，相同则返回 true。</td>
<td style="text-align:left"><code>[ $a == $b ]</code> 返回 false。</td>
</tr>
<tr>
<td style="text-align:center"><code>!=</code></td>
<td style="text-align:left">比较两个数字，不相同则返回 true。</td>
<td style="text-align:left"><code>[ $a != $b ]</code> 返回 true。</td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h3 id="关系运算符">关系运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>eq</code></td>
<td style="text-align:left">检测两个数是否相等，相等返回 true。</td>
<td style="text-align:left"><code>[ $a -eq $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-ne</code></td>
<td style="text-align:left">检测两个数是否不相等，不相等返回 true。</td>
<td style="text-align:left"><code>[ $a -ne $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-gt</code></td>
<td style="text-align:left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -gt $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-lt</code></td>
<td style="text-align:left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -lt $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-ge</code></td>
<td style="text-align:left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -ge $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-le</code></td>
<td style="text-align:left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left"><code>[ $a -le $b ]</code></td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h3 id="布尔运算符">布尔运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>!</code></td>
<td style="text-align:left">非运算， true 返回 false，false 返回 true。</td>
<td style="text-align:left"><code>[ ! false ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-o</code></td>
<td style="text-align:left">或运算，有 true 则返回 true。</td>
<td style="text-align:left"><code>[ $a -lt 20 -o $b -gt 100 ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-a</code></td>
<td style="text-align:left">与运算，都为 true 才返回 true。</td>
<td style="text-align:left"><code>[ $a -lt 20 -a $b -gt 100 ]</code></td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h3 id="逻辑运算符">逻辑运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>&amp;&amp;</code></td>
<td style="text-align:left">逻辑的 and</td>
<td style="text-align:left"><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>||</code></td>
<td style="text-align:left">逻辑的 or</td>
<td style="text-align:left"><code>[[ $a -lt 100 || $b -gt 100 ]]</code></td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h3 id="字符串运算符">字符串运算符</h3>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>=</code></td>
<td style="text-align:left">检测两个字符串是否相等，相等返回 true。</td>
<td style="text-align:left"><code>[ $a = $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>!=</code></td>
<td style="text-align:left">检测两个字符串是否相等，不相等返回 true。</td>
<td style="text-align:left"><code>[ $a != $b ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-z</code></td>
<td style="text-align:left">检测字符串长度是否为0，为0返回 true。</td>
<td style="text-align:left"><code>[ -z $a ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-n</code></td>
<td style="text-align:left">检测字符串长度是否不为 0，不为 0 返回 true。</td>
<td style="text-align:left"><code>[ -n &quot;$a&quot; ]</code></td>
</tr>
<tr>
<td style="text-align:center"><code>$</code></td>
<td style="text-align:left">检测字符串是否为空，不为空返回 true。</td>
<td style="text-align:left"><code>[ $a ]</code></td>
</tr>
</tbody>
</table>
<figcaption>摘自菜鸟教程</figcaption>
<h3 id="执行脚本">执行脚本</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">chmod +x visdot.sh
<span class="c1">#为脚本设置可执行权限</span>

./visdot.sh
<span class="c1">#执行脚本</span>
</code></pre></div><h2 id="变量">变量</h2>
<h3 id="变量命名规则">变量命名规则</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="s2">&#34;XXX&#34;</span>
</code></pre></div><ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<h2 id="基本用法">基本用法</h2>
<p>使用定义过的变量需在变量名前加 <code>$</code> 符号，在需要区分变量名时，可在变量名外添加花括号。</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="s2">&#34;XXX&#34;</span>
<span class="nb">echo</span> <span class="nv">$A</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">A</span><span class="si">}</span>
</code></pre></div><h3 id="只读变量">只读变量</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">readonly</span> A <span class="c1">#将变量 A 转化为只读变量</span>
</code></pre></div><h3 id="删除变量">删除变量</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">unset</span> A <span class="c1">#将变量 A 删除</span>
</code></pre></div><h2 id="shell-字符串">Shell 字符串</h2>
<p>Shell 数据类型主要包括「字符串」和「数字」，字符串外可用单引号或双引号，也可不用引号。</p>
<p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</li>
<li>单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用。</li>
</ul>
<p>双引号的优点：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<h3 id="获取字符串长度">获取字符串长度</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="s2">&#34;xxxx&#34;</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">A</span><span class="si">}</span> <span class="c1">#输出 4</span>
</code></pre></div><h3 id="提取子字符串">提取子字符串</h3>
<p>从字符串 A 第 2 个字符截取至第 3 个字符。</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="s2">&#34;abcdef&#34;</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">A</span><span class="p">:</span><span class="nv">1</span><span class="p">:</span><span class="nv">3</span><span class="si">}</span>
<span class="c1"># 输出 bcd</span>
</code></pre></div><blockquote>
<p>脚本语言索引值都是从 0 开始的。</p>
</blockquote>
<h3 id="查找子字符串">查找子字符串</h3>
<p>在字符串 A 中查找字符 d 或 f 的位置，哪个字母先出现就计算哪个。</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="s2">&#34;abcdef&#34;</span>
<span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$A</span><span class="s2">&#34;</span> df<span class="sb">`</span>
<span class="c1"># 输出 4</span>
</code></pre></div><h2 id="shell-数组">Shell 数组</h2>
<p>用括号来表示数组，各元素用「空格」隔开。</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">GA</span><span class="o">=(</span>a b c d ... n<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">GA</span><span class="o">=(</span>
a
b
c
<span class="o">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">GA<span class="o">[</span>0<span class="o">]=</span>a
GA<span class="o">[</span>1<span class="o">]=</span>b
GA<span class="o">[</span>2<span class="o">]=</span>c
</code></pre></div><h3 id="读取数组">读取数组</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">A</span><span class="o">=</span><span class="si">${</span><span class="nv">GA</span><span class="p">[1]</span><span class="si">}</span>
<span class="c1"># 将数组 GA 中第 2 个值赋给变量 A。</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">GA</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1"># 将数组 GA 中全部值输出。</span>
</code></pre></div><h2 id="参考资料">参考资料</h2>
<ol>
<li><a href="https://www.runoob.com/linux/linux-shell.html" target="_black">菜鸟教程</a></li>
</ol>

		</div>
		</div>
	</div>
</div>
  <div class="footer">
  	Copyright &copy 2019-2020 <a target="_blank" href="https://github.com/leejiawang">世佳</a> ｜ <a href="/about">关于视点</a> ｜ </span><a href="javascript:scroll(0,0)">返回页首</a><svg t="1604653824882" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3895" width="20" height="20"><path d="M794.453333 350.72l-213.333333-170.666667a42.666667 42.666667 0 0 0-52.906667 0l-213.333333 170.666667a42.666667 42.666667 0 0 0 52.906667 66.56L512 302.08V682.666667a42.666667 42.666667 0 0 1-42.666667 42.666666H256a42.666667 42.666667 0 0 0 0 85.333334h213.333333a128 128 0 0 0 128-128V302.08l144.213334 115.2A42.666667 42.666667 0 0 0 768 426.666667a42.666667 42.666667 0 0 0 33.28-16.213334 42.666667 42.666667 0 0 0-6.826667-59.733333z" p-id="3896" fill="#8a8a8a"></path></svg>
</div>

  </body>

  <script src="https://cdn.jsdelivr.net/gh/leejiawang/visdot/js/common.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.3.2/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="https://cdn.bootcdn.net/ajax/libs/fuse.js/6.4.3/fuse.min.js"></script>
  <script src="/js/fastsearch.js"></script>
</html>